# Remove .html extension from URLs
RewriteEngine On

# Handle root redirects first
RewriteRule ^index\.html$ / [R=301,L]
RewriteRule ^home\.html$ / [R=301,L]
RewriteRule ^home/?$ / [R=301,L]

# Remove trailing slash (redirect /page/ to /page)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(.+)/$
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^(.+)/$ /$1 [R=301,L]

# Remove .html extension from URL (redirect /page.html to /page)
RewriteCond %{THE_REQUEST} \s+/+([^.\s?]*?)\.html[\s?] [NC]
RewriteRule ^ /%1 [R=301,L]

# Add .html extension internally (when accessing /page, serve /page.html)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/[^/]*\.[^/]+$
RewriteRule ^([^./]+)/?$ $1.html [L]

# Security: Block access to sensitive files
<Files ~ "\.(htaccess|htpasswd|ini|log|sh|sql|conf)$">
    Require all denied
</Files>

# Security: Prevent directory browsing
Options -Indexes
